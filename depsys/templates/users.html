{% extends "layout.html" %}
{% block navbar_title %}
<ol class="breadcrumb navbar-breadcrumb">
    <li class="active">Users</li>
</ol>
{% endblock %}
{% block content %}
<script src="../static/layer/layer.js"></script>
<script src="../static/js/users.js"></script>
<!-- Main Content -->
    <div class="container-fluid">
        <div class="side-body">
            <div class="page-title">
                <span class="title">用户管理</span>
                <div class="description">用户配置及权限管理</div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="sub-title">用户列表</div>
                                <table class="datatable table table-striped" cellspacing="0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>User ID</th>
                                            <th>Name</th>
                                            <th>Enable</th>
                                            <th>Role</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tfoot>
                                    <tr>
                                        <th>User ID</th>
                                        <th>Name</th>
                                        <th>Enable</th>
                                        <th>Role</th>
                                        <th>Action</th>
                                    </tr>
                                    </tfoot>
                                    <tbody>
                                    {% for user in user_list %}
                                        <tr id="{{ user.id }}">
                                            <td style="vertical-align: middle">{{ user.id }}</td>
                                            <td style="vertical-align: middle">{{ user.username }}</td>
                                            <td style="vertical-align: middle">
                                                {% if user.enable %}
                                                    <input type="checkbox" value="{{ user.enable }}" class="toggle-checkbox" checked>
                                                {% else %}
                                                    <input type="checkbox" value="{{ user.enable }}" class="toggle-checkbox">
                                                {% endif %}
                                            </td>
                                            {% for role in role_list %}
                                                {% if user.role == role.role_id %}
                                                    <td style="vertical-align: middle">{{ role.name }}</td>
                                                {% endif %}
                                            {% endfor %}
                                            <td style="vertical-align: middle">
                                                <a class="btn btn-default btn-sm" onclick="del_user('{{ user.id }}')">删除</a>
                                                <a class="btn btn-default btn-sm" onclick="pwd_reset('{{ user.id }}')">重置密码</a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
